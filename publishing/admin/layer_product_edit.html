<link rel="stylesheet" href="./src/styles/layer.css">
<script src="https://code.jquery.com/jquery-3.6.3.min.js"
        integrity="sha256-pvPw+upLPUjgMXY0G+8O0xUf+/Im1MZjXxxgOcBQBXU=" crossorigin="anonymous"></script>
<div class="layer_name layer lg">
    <div class="layer_container">
        <a href="#" class="btn_layer_close">
            <div>
                <img src="./src/images/close.png">
            </div>
        </a>
        <div class="layer_header">
            <h2 class="title"> 상품 수정 페이지 </h2>
        </div>
        <div class="layer_content">
        <div class="top">
            <div class="user_bind">
                <div class="user_input">
                    <div class="input_box ">
                        <h4 class="input_title">상품 번호</h4>
                        <div class="input_item">
                            <p>1</p>
                        </div>
                    </div>
                    <div class="input_box">
                        <h4 class="input_title">브랜드명</h4>
                        <div class="input_item">
                            <input type="text" name="brand_name" placeholder="브랜드명(ENG)">
                        </div>
                    </div>
                    <div class="input_box">
                        <h4 class="input_title">상품명</h4>
                        <div class="input_item">
                            <input type="text" name="product_name" placeholder="상품명">
                        </div>
                    </div>
                    <div class="input_box">
                        <h4 class="input_title">상품명(KOR)</h4>
                        <div class="input_item">
                            <input type="text" name="product_name_kor" placeholder="상품명(KOR)">
                        </div>
                    </div>
                    <div class="input_box">
                        <h4 class="input_title">사이즈</h4>
                        <div class="input_item">
                            <input type="text" name="size" placeholder="사이즈">
                        </div>
                    </div>
                </div>
            </div>
            <div class="user_bind img">
                <div class="uploadImg">
                    <div class="filebox">
                        <input class="upload-name" value="선택된 파일 없음" disabled="disabled">
                        <input type="file" id="file1" class="upload-hidden" name="file1">
                        <label for="file1">이미지 첨부</label>
                    </div>
                    <img id="previewImg" onclick="popImage(this.src)">
                </div>
            </div>
        </div>
        <div class="center">
            <div class="user_bind">
                <div class="user_input">
                    <div class="input_box">
                        <h4 class="input_title">모델번호</h4>
                        <div class="input_item">
                            <input type="text" name="model_num" placeholder="모델번호">
                        </div>
                    </div>
                    <div class="input_box">
                        <h4 class="input_title">출시일</h4>
                        <div class="input_item">
                            <input type="text" name="release_date" placeholder="출시일">
                        </div>
                    </div>
                </div>
            </div>
            <div class="user_bind">
                <div class="user_input">
                    <div class="input_box">
                        <h4 class="input_title">컬러</h4>
                        <div class="input_item">
                            <input type="text" name="color" placeholder="컬러">
                        </div>
                    </div>
                    <div class="input_box">
                        <h4 class="input_title">발매가</h4>
                        <div class="input_item">
                            <input type="text" name="first_price" placeholder="발매가">
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="bottom">
            <div class="user_bind">
                <div class="user_input">
                    <div class="input_box">
                        <h4 class="input_title">카테고리</h4>
                        <div class="input_item">
                            <select name="category" class="input_item_selectbox">
                                <option value="ship_status">- 카테고리를 선택하세요 -</option>
                                <option value="스니커즈">스니커즈</option>
                                <option value="부츠">부츠</option>
                                <option value="더비/레이스업">더비/레이스업</option>
                                <option value="로퍼/플랫">로퍼/플랫</option>
                                <option value="샌들/슬리퍼">샌들/슬리퍼</option>
                                <option value="패딩">패딩</option>
                                <option value="코트">코트</option>
                                <option value="니트웨어">니트웨어</option>
                                <option value="자켓">자켓</option>
                                <option value="후드">후드</option>
                                <option value="스웨트셔츠">스웨트셔츠</option>
                                <option value="긴팔 티셔츠">긴팔 티셔츠</option>
                                <option value="반팔 티셔츠">반팔 티셔츠</option>
                                <option value="셔츠">셔츠</option>
                                <option value="바지">바지</option>
                                <option value="반바지">반바지</option>
                                <option value="스커트">스커트</option>
                                <option value="스몰레더">스몰레더</option>
                                <option value="가방">가방</option>
                                <option value="시계">시계</option>
                                <option value="주얼리">주얼리</option>
                                <option value="모자">모자</option>
                                <option value="스카프">스카프</option>
                                <option value="아이웨어">아이웨어</option>
                                <option value="벨트">벨트</option>
                                <option value="레고">레고</option>
                                <option value="향수">향수</option>
                                <option value="아트토이/피규어">아트토이/피규어</option>
                                <option value="트레이딩 카드">트레이딩 카드</option>
                                <option value="LP/CD">LP/CD</option>
                                <option value="스마트폰">스마트폰</option>
                                <option value="스마트워치">스마트워치</option>
                                <option value="태블릿">태블릿</option>
                                <option value="음향기기">음향기기</option>
                                <option value="게임기">게임기</option>
                                <option value="그래픽카드">그래픽카드</option>
                                <option value="테크 액세서리">테크 액세서리</option>
                                <option value="리뉴드 테크">리뉴드 테크</option>
                                <option value="기타">기타</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="layer_btn">
            <a href="#" class="btn btn_save solid medium">수정</a>
        </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function(){
        //파일첨부 이벤트
        $('.filebox .upload-hidden').on('change', function(){  			
            if(window.FileReader){
                var filename = $(this)[0].files[0].name;
                if(!validFileType(filename)){
                    alert("허용하지 않는 확장자 파일입니다.");
                    return false;
                }else{
                    if(!validFileSize($(this)[0].files[0])){
                        alert("파일 사이즈가 10MB를 초과합니다.");
                        return false;
                    }else{
                        if(!validFileNameSize(filename)){
                            alert("파일명이 30자를 초과합니다.");
                            return false;
                        }
                    }
                }
            } else {
                var filename = $(this).val().split('/').pop().split('\\').pop();
            }
            $(this).prev().val(filename); //input upload-name 에 파일명 설정해주기

            readImage($(this)[0]); //미리보기
        });
    });

    function validFileType(filename) {
        const fileTypes = ["png", "jpg", "jpeg"];
		return fileTypes.indexOf(filename.substring(filename.lastIndexOf(".")+1, filename.length).toLowerCase()) >= 0;
	}
    function validFileSize(file){
        if(file.size > 10000000){ //10MB
            return false;
        }else{
            return true;
        }
    }

    function validFileNameSize(filename){
        if(filename.length > 30){ //30자
            return false;
        }else{
            return true;
        }
    }

    //이미지 띄우기
    function readImage(input) {
	    if(input.files && input.files[0]) {
	        const reader = new FileReader();
	        reader.onload = function(e){
	            const previewImage = document.getElementById("previewImg");
	            previewImage.src = e.target.result;
	        }
	        // reader가 이미지 읽도록 하기
	        reader.readAsDataURL(input.files[0]);
	    }
	}
    //이미지 원본 팝업 띄우기
    function popImage(url) {
        var img = new Image();
        img.src = url;
        var img_width = img.width;
        var win_width = img.width + 25;
        var img_height = img.height;
        var win = img.height + 30;
        var popup = window.open('', '_blank', 'width=' + img_width + ', height=' + img_height + ', menubars=no, scrollbars=auto');
        popup.document.write("<style>body{margin:0px;}</style><img src='"+url+"' width='"+win_width+"'>");
    }
</script>